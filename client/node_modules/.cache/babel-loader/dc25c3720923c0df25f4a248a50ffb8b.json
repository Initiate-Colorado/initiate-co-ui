{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar OperationType_1 = require(\"../OperationType\");\n\nvar Utils_1 = require(\"../Utils\");\n\nvar DefaultAppSyncMutationAdapter =\n/** @class */\nfunction () {\n  function DefaultAppSyncMutationAdapter(options) {\n    if (Array.isArray(options)) {\n      this.variables = Utils_1.default.resolveVariables(options);\n    } else {\n      this.variables = options.variables;\n      this.fields = options.fields;\n      this.operation = options.operation;\n    }\n  }\n\n  DefaultAppSyncMutationAdapter.prototype.mutationBuilder = function () {\n    return this.operationWrapperTemplate(this.variables, this.operationTemplate(this.operation));\n  };\n\n  DefaultAppSyncMutationAdapter.prototype.mutationsBuilder = function (mutations) {\n    var _this = this;\n\n    var content = mutations.map(function (opts) {\n      _this.operation = opts.operation;\n      _this.variables = opts.variables;\n      _this.fields = opts.fields;\n      return _this.operationTemplate(opts.operation);\n    });\n    return this.operationWrapperTemplate(Utils_1.default.resolveVariables(mutations), content.join(\"\\n  \"));\n  }; // Convert object to name and argument map. eg: (id: $id)\n\n\n  DefaultAppSyncMutationAdapter.prototype.queryDataNameAndArgumentMap = function () {\n    return this.variables && Object.keys(this.variables).length ? \"(\" + Object.keys(this.variables).reduce(function (dataString, key, i) {\n      return \"\" + dataString + (i !== 0 ? \", \" : \"\") + key + \": $\" + key;\n    }, \"\") + \")\" : \"\";\n  };\n\n  DefaultAppSyncMutationAdapter.prototype.queryDataArgumentAndTypeMap = function (variables) {\n    return Object.keys(variables).length ? \"(\" + Object.keys(variables).reduce(function (dataString, key, i) {\n      return \"\" + dataString + (i !== 0 ? \", \" : \"\") + \"$\" + key + \": \" + Utils_1.default.queryDataType(variables[key]);\n    }, \"\") + \")\" : \"\";\n  }; // start of mutation building\n\n\n  DefaultAppSyncMutationAdapter.prototype.operationWrapperTemplate = function (variables, content) {\n    return {\n      query: OperationType_1.default.Mutation + \" \" + (this.operation.charAt(0).toUpperCase() + this.operation.slice(1)) + \" \" + this.queryDataArgumentAndTypeMap(variables) + \" {\\n  \" + content + \"\\n}\",\n      variables: Utils_1.default.queryVariablesMap(variables)\n    };\n  };\n\n  DefaultAppSyncMutationAdapter.prototype.operationTemplate = function (operation) {\n    return operation + \" \" + this.queryDataNameAndArgumentMap() + \" {\\n    \" + this.queryFieldsMap(this.fields) + \"\\n  }\";\n  }; // Fields selection map. eg: { id, name }\n\n\n  DefaultAppSyncMutationAdapter.prototype.queryFieldsMap = function (fields) {\n    var _this = this;\n\n    return Array.isArray(fields) ? fields.map(function (field) {\n      return typeof field === \"object\" ? Object.keys(field)[0] + \" { \" + _this.queryFieldsMap(Object.values(field)[0]) + \" }\" : \"\" + field;\n    }).join(\", \") : \"\";\n  };\n\n  return DefaultAppSyncMutationAdapter;\n}();\n\nexports.default = DefaultAppSyncMutationAdapter;","map":{"version":3,"sources":["../../src/adapters/DefaultAppSyncMutationAdapter.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar OperationType_1 = require(\"../OperationType\");\nvar Utils_1 = require(\"../Utils\");\nvar DefaultAppSyncMutationAdapter = /** @class */ (function () {\n    function DefaultAppSyncMutationAdapter(options) {\n        if (Array.isArray(options)) {\n            this.variables = Utils_1.default.resolveVariables(options);\n        }\n        else {\n            this.variables = options.variables;\n            this.fields = options.fields;\n            this.operation = options.operation;\n        }\n    }\n    DefaultAppSyncMutationAdapter.prototype.mutationBuilder = function () {\n        return this.operationWrapperTemplate(this.variables, this.operationTemplate(this.operation));\n    };\n    DefaultAppSyncMutationAdapter.prototype.mutationsBuilder = function (mutations) {\n        var _this = this;\n        var content = mutations.map(function (opts) {\n            _this.operation = opts.operation;\n            _this.variables = opts.variables;\n            _this.fields = opts.fields;\n            return _this.operationTemplate(opts.operation);\n        });\n        return this.operationWrapperTemplate(Utils_1.default.resolveVariables(mutations), content.join(\"\\n  \"));\n    };\n    // Convert object to name and argument map. eg: (id: $id)\n    DefaultAppSyncMutationAdapter.prototype.queryDataNameAndArgumentMap = function () {\n        return this.variables && Object.keys(this.variables).length\n            ? \"(\" + Object.keys(this.variables).reduce(function (dataString, key, i) {\n                return \"\" + dataString + (i !== 0 ? \", \" : \"\") + key + \": $\" + key;\n            }, \"\") + \")\"\n            : \"\";\n    };\n    DefaultAppSyncMutationAdapter.prototype.queryDataArgumentAndTypeMap = function (variables) {\n        return Object.keys(variables).length\n            ? \"(\" + Object.keys(variables).reduce(function (dataString, key, i) {\n                return \"\" + dataString + (i !== 0 ? \", \" : \"\") + \"$\" + key + \": \" + Utils_1.default.queryDataType(variables[key]);\n            }, \"\") + \")\"\n            : \"\";\n    };\n    // start of mutation building\n    DefaultAppSyncMutationAdapter.prototype.operationWrapperTemplate = function (variables, content) {\n        return {\n            query: OperationType_1.default.Mutation + \" \" + (this.operation.charAt(0).toUpperCase() + this.operation.slice(1)) + \" \" + this.queryDataArgumentAndTypeMap(variables) + \" {\\n  \" + content + \"\\n}\",\n            variables: Utils_1.default.queryVariablesMap(variables),\n        };\n    };\n    DefaultAppSyncMutationAdapter.prototype.operationTemplate = function (operation) {\n        return operation + \" \" + this.queryDataNameAndArgumentMap() + \" {\\n    \" + this.queryFieldsMap(this.fields) + \"\\n  }\";\n    };\n    // Fields selection map. eg: { id, name }\n    DefaultAppSyncMutationAdapter.prototype.queryFieldsMap = function (fields) {\n        var _this = this;\n        return Array.isArray(fields)\n            ? fields\n                .map(function (field) {\n                return typeof field === \"object\"\n                    ? Object.keys(field)[0] + \" { \" + _this.queryFieldsMap(Object.values(field)[0]) + \" }\"\n                    : \"\" + field;\n            })\n                .join(\", \")\n            : \"\";\n    };\n    return DefaultAppSyncMutationAdapter;\n}());\nexports.default = DefaultAppSyncMutationAdapter;\n//# sourceMappingURL=DefaultAppSyncMutationAdapter.js.map"]},"metadata":{},"sourceType":"script"}