{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar OperationType_1 = require(\"../OperationType\");\n\nvar Utils_1 = require(\"../Utils\");\n\nvar DefaultAppSyncQueryAdapter =\n/** @class */\nfunction () {\n  function DefaultAppSyncQueryAdapter(options) {\n    this.queryDataType = function (variable) {\n      var type = \"String\";\n      var value = typeof variable === \"object\" ? variable.value : variable;\n\n      if (variable.type !== undefined) {\n        type = variable.type;\n      } else {\n        switch (typeof value) {\n          case \"object\":\n            type = \"Object\";\n            break;\n\n          case \"boolean\":\n            type = \"Boolean\";\n            break;\n\n          case \"number\":\n            type = value % 1 === 0 ? \"Int\" : \"Float\";\n            break;\n        }\n      }\n\n      if (typeof variable === \"object\" && variable.required) {\n        type += \"!\";\n      }\n\n      return type;\n    };\n\n    if (Array.isArray(options)) {\n      this.variables = Utils_1.default.resolveVariables(options);\n    } else {\n      this.variables = options.variables;\n      this.fields = options.fields || [];\n      this.operation = options.operation;\n    }\n  } // kicks off building for a single query\n\n\n  DefaultAppSyncQueryAdapter.prototype.queryBuilder = function () {\n    return this.operationWrapperTemplate(this.operationTemplate());\n  }; // if we have an array of options, call this\n\n\n  DefaultAppSyncQueryAdapter.prototype.queriesBuilder = function (queries) {\n    var _this = this;\n\n    var content = function content() {\n      var tmpl = [];\n      queries.forEach(function (query) {\n        if (query) {\n          _this.operation = query.operation;\n          _this.fields = query.fields;\n          _this.variables = query.variables;\n          tmpl.push(_this.operationTemplate());\n        }\n      });\n      return tmpl.join(\" \");\n    };\n\n    return this.operationWrapperTemplate(content());\n  }; // Convert object to name and argument map. eg: (id: $id)\n\n\n  DefaultAppSyncQueryAdapter.prototype.queryDataNameAndArgumentMap = function () {\n    return this.variables && Object.keys(this.variables).length ? \"(\" + Object.keys(this.variables).reduce(function (dataString, key, i) {\n      return \"\" + dataString + (i !== 0 ? \", \" : \"\") + key + \": $\" + key;\n    }, \"\") + \")\" : \"\";\n  }; // Convert object to argument and type map. eg: ($id: Int)\n\n\n  DefaultAppSyncQueryAdapter.prototype.queryDataArgumentAndTypeMap = function () {\n    var _this = this;\n\n    return this.variables && Object.keys(this.variables).length ? \"(\" + Object.keys(this.variables).reduce(function (dataString, key, i) {\n      return \"\" + dataString + (i !== 0 ? \", \" : \"\") + \"$\" + key + \": \" + _this.queryDataType(_this.variables[key]);\n    }, \"\") + \")\" : \"\";\n  };\n\n  DefaultAppSyncQueryAdapter.prototype.operationWrapperTemplate = function (content) {\n    return {\n      query: OperationType_1.default.Query + \" \" + this.operation.charAt(0).toUpperCase() + this.operation.slice(1) + \" \" + this.queryDataArgumentAndTypeMap() + \" { \" + content + \" }\",\n      variables: Utils_1.default.queryVariablesMap(this.variables)\n    };\n  }; // query\n\n\n  DefaultAppSyncQueryAdapter.prototype.operationTemplate = function () {\n    return this.operation + \" \" + this.queryDataNameAndArgumentMap() + \" { nodes { \" + Utils_1.default.queryFieldsMap(this.fields) + \" } }\";\n  };\n\n  return DefaultAppSyncQueryAdapter;\n}();\n\nexports.default = DefaultAppSyncQueryAdapter;","map":{"version":3,"sources":["../../src/adapters/DefaultAppSyncQueryAdapter.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar OperationType_1 = require(\"../OperationType\");\nvar Utils_1 = require(\"../Utils\");\nvar DefaultAppSyncQueryAdapter = /** @class */ (function () {\n    function DefaultAppSyncQueryAdapter(options) {\n        this.queryDataType = function (variable) {\n            var type = \"String\";\n            var value = typeof variable === \"object\" ? variable.value : variable;\n            if (variable.type !== undefined) {\n                type = variable.type;\n            }\n            else {\n                switch (typeof value) {\n                    case \"object\":\n                        type = \"Object\";\n                        break;\n                    case \"boolean\":\n                        type = \"Boolean\";\n                        break;\n                    case \"number\":\n                        type = value % 1 === 0 ? \"Int\" : \"Float\";\n                        break;\n                }\n            }\n            if (typeof variable === \"object\" && variable.required) {\n                type += \"!\";\n            }\n            return type;\n        };\n        if (Array.isArray(options)) {\n            this.variables = Utils_1.default.resolveVariables(options);\n        }\n        else {\n            this.variables = options.variables;\n            this.fields = options.fields || [];\n            this.operation = options.operation;\n        }\n    }\n    // kicks off building for a single query\n    DefaultAppSyncQueryAdapter.prototype.queryBuilder = function () {\n        return this.operationWrapperTemplate(this.operationTemplate());\n    };\n    // if we have an array of options, call this\n    DefaultAppSyncQueryAdapter.prototype.queriesBuilder = function (queries) {\n        var _this = this;\n        var content = function () {\n            var tmpl = [];\n            queries.forEach(function (query) {\n                if (query) {\n                    _this.operation = query.operation;\n                    _this.fields = query.fields;\n                    _this.variables = query.variables;\n                    tmpl.push(_this.operationTemplate());\n                }\n            });\n            return tmpl.join(\" \");\n        };\n        return this.operationWrapperTemplate(content());\n    };\n    // Convert object to name and argument map. eg: (id: $id)\n    DefaultAppSyncQueryAdapter.prototype.queryDataNameAndArgumentMap = function () {\n        return this.variables && Object.keys(this.variables).length\n            ? \"(\" + Object.keys(this.variables).reduce(function (dataString, key, i) {\n                return \"\" + dataString + (i !== 0 ? \", \" : \"\") + key + \": $\" + key;\n            }, \"\") + \")\"\n            : \"\";\n    };\n    // Convert object to argument and type map. eg: ($id: Int)\n    DefaultAppSyncQueryAdapter.prototype.queryDataArgumentAndTypeMap = function () {\n        var _this = this;\n        return this.variables && Object.keys(this.variables).length\n            ? \"(\" + Object.keys(this.variables).reduce(function (dataString, key, i) {\n                return \"\" + dataString + (i !== 0 ? \", \" : \"\") + \"$\" + key + \": \" + _this.queryDataType(_this.variables[key]);\n            }, \"\") + \")\"\n            : \"\";\n    };\n    DefaultAppSyncQueryAdapter.prototype.operationWrapperTemplate = function (content) {\n        return {\n            query: OperationType_1.default.Query + \" \" + this.operation\n                .charAt(0)\n                .toUpperCase() + this.operation.slice(1) + \" \" + this.queryDataArgumentAndTypeMap() + \" { \" + content + \" }\",\n            variables: Utils_1.default.queryVariablesMap(this.variables),\n        };\n    };\n    // query\n    DefaultAppSyncQueryAdapter.prototype.operationTemplate = function () {\n        return this.operation + \" \" + this.queryDataNameAndArgumentMap() + \" { nodes { \" + Utils_1.default.queryFieldsMap(this.fields) + \" } }\";\n    };\n    return DefaultAppSyncQueryAdapter;\n}());\nexports.default = DefaultAppSyncQueryAdapter;\n//# sourceMappingURL=DefaultAppSyncQueryAdapter.js.map"]},"metadata":{},"sourceType":"script"}